@page
@model WebApp.Pages.Ticket.DetailsFinished

@{
    ViewData["Title"] = "Details";
}

@{
    TimeSpan timeDifference = Model.Ticket.FinishedBy - Model.Ticket.UpdatedAt;
    int remainingDays = (int)timeDifference.TotalDays;
    int remainingHours = timeDifference.Hours;
    int remainingMinutes = timeDifference.Minutes;
}

<h1>Details</h1>

<div>
    <h4>Finished Ticket #@Model.Ticket.Id</h4>
    <hr />
    <dl class="row">
        <dt class="col-sm-2">
            Created at
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Ticket.CreatedAtDt)
        </dd>
        <dt class="col-sm-2">
            Finished at
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Ticket.UpdatedAt)
        </dd>
        <dt class="col-sm-2">
            Ticket name
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Ticket.Name)
        </dd>
        <dt class="col-sm-2">
            Ticket description
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Ticket.Description)
        </dd>
        <dt class="col-sm-2">
            Finishing time
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Ticket.FinishedBy)
        </dd>
        <dt class="col-sm-2">
            Is the ticket done?
        </dt>
        <dd class="col-sm-10">
            @Html.DisplayFor(model => model.Ticket.IsDone)
        </dd>
        <dt class="col-sm-2">
            Remaining Time
        </dt>
        <dd class="col-sm-10">
            @if (remainingDays > 0)
            {
                <span>@remainingDays day(s), </span> 
            }
            <span>@remainingHours</span> hour(s), 
            <span>@remainingMinutes</span> minute(s)
        </dd>
        
    </dl>
</div>
<div>
    <a asp-page="./Delete" asp-route-id="@Model.Ticket.Id">Delete</a> |
    <a asp-page="./FinishedTickets">Back to Finished Tickets List</a>
</div>
